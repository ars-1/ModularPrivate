{% extends 'Core/Base.html' %}

{% load static %}

{% block content %}
    <!-- Start Body -->
    <div class="row sectionC">
        <h3>User Profile</h3>
        <div class="col-md-14">
            <div class="row insideSectionC">
                <div class="col col-md-6 sectionCA">
                    <h3>Personnal Information:</h3>
                    <div class="box-sectionC">

                        <div class="row">
                            <div class="col col-md-3">
                                <div class="row heading">
                                    First Name
                                </div>
                                <div class="row info">
                                    {{ employee.fname }}
                                </div>
                            </div>
                            <div class="col col-md-3">
                                <div class="row heading">
                                    Last Name
                                </div>
                                <div class="row info">
                                    {{ employee.lname }}
                                </div>
                            </div>
                            <div class="col col-md-4">
                                <div class="row heading">
                                    Mobile
                                </div>
                                <div class="row info">
                                    {{ employee.mobile }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-4">
                                <div class="row heading">
                                    CNIC
                                </div>
                                <div class="row info">
                                    {{ employee.cnic }}
                                </div>
                            </div>
                            <div class="col col-md-6">
                                <div class="row heading">
                                    Email
                                </div>
                                <div class="row info">
                                    {{ employee.email }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-10">
                                <div class="row heading">
                                    Address
                                </div>
                                <div class="row info">
                                    {{ employee.housestreet }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-3">
                                <div class="row heading">
                                    City
                                </div>
                                <div class="row info">
                                    {{ employee.city }}
                                </div>
                            </div>
                            <div class="col col-md-3">
                                <div class="row heading">
                                    Country
                                </div>
                                <div class="row info">
                                    {{ employee.country }}
                                </div>
                            </div>
                            <div class="col col-md-4">
                                <div class="row heading">
                                    Postal Code
                                </div>
                                <div class="row info">
                                    54000
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-5">
                                <div class="row heading">
                                    Basic Salary
                                </div>
                                <div class="row info">
                                    {{ employee.salary }}/- pkr
                                </div>
                            </div>
                            <div class="col col-md-5">
                                <div class="row heading">
                                    Department
                                </div>
                                <div class="row info">
                                    {{ employee.department }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-10">
                                <div class="row heading">
                                    Designation / Post
                                </div>
                                <div class="row info">
                                    {{ employee.designation.all|join:", " }}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-md-10">
                                <a href="/oracle/updateEmployee/{{ employee.id }}" class="btn btn-primary">Update</a>
                                <a href="/oracle/deleteEmployee/{{ employee.id }}" class="btn btn-danger">Delete</a>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col col-md-4 sectionCB">

                    <div class="row ImageContainer">
                        <img src="{{ employee.profile_pic.url }}">
                    </div>
                    <hr>
                    <br>
                    <h3>Attendance Count</h3>
                    <p style="font-size: 10px;">{{ fromd }} - {{ tod }}</p>
                    <div class="row">
                        <div class="col col-md-4">
                            <div class="row heading">
                                Presents
                            </div>
                            <div class="row info">
                                {{ presents }}
                            </div>
                        </div>
                        <div class="col col-md-4">
                            <div class="row heading">
                                Absents
                            </div>
                            <div class="row info">
                                {{ absents }}
                            </div>
                        </div>
                        <div class="col col-md-4">
                            <div class="row heading">
                                HalfTime
                            </div>
                            <div class="row info">
                                {{ halftimes }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col col-md-4">
                            <div class="row heading">
                                Leaves
                            </div>
                            <div class="row info">
                                {{ leaves }}
                            </div>
                        </div>
                        <div class="col col-md-4">
                            <div class="row heading">
                                Advance
                            </div>
                            <div class="row info">
                                30
                            </div>
                        </div>
                        <div class="col col-md-4">
                            <div class="row heading">
                                &nbsp; Salary
                            </div>
                            <div class="row info" style="margin-left: -28px !important;">
                                {{ Salary|floatformat:0 }} /-pkr
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col col-md-12">
                            <button class="btn btn-success">Print</button>
                            <a>&nbsp;</a>
                            <button class="btn btn-info">Report</button>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row insideSectionC">
                <div class="col col-md-7 sectionCD">
                    <table class="table">
                        <tr class="heading">
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                            <th><h3>Attendances</h3></th>
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                        </tr>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Date Time</th>
                            <th>Month</th>
                            <th>Status</th>
                            <th>Update / Delete</th>
                        </tr>
                        <tbody>
                        {% for attendance in attendances %}
                            <tr>
                                <td>{{ attendance.id }}</td>
                                <td>{{ attendance.employee.fname }}</td>
                                <td>{{ attendance.datestamp }}</td>
                                <td>{{ attendance.month }}</td>
                                <td>{{ attendance.status }}</td>
                                {% if request.user.is_staff %}
                                <td>
                                    <a href="/oracle/updateAttendance/{{ attendance.id }}"><span class="fa fa-pencil-alt"></span></a>
                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                    <a href="/oracle/deleteAttendance/{{ attendance.id }}"><span class="fa fa-trash-alt"></span></a>
                                </td>
                                {% endif %}
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>

                <div class="col col-md-3 sectionCD">
                    <table>
                        <tr class="heading">
                            <th>&nbsp;</th>
                            <th><h3>Tasks</h3></th>
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                        </tr>
                        <tr>
                            <th>Task</th>
                            <th>Status</th>
                            <th>Time</th>
                            <th>Update</th>
                        </tr>
                        {% for task in tasks %}
                        <tr>
                            <td>{{ task.title }}</td>
                            <td>
                                {% if task.status.title == 'Completed' %}
                                <span class="fa fa-check-circle" style="color: #00FF00; filter:drop-shadow(0px 0px 10px #00ff00)"></span>
                                {% elif task.status.title == 'Pending' %}
                                <span class="fa fa-check-circle" style="color: red; filter:drop-shadow(0px 0px 10px red)"></span>
                                {% elif task.status.title == 'Assigned' %}
                                <span class="fa fa-check-circle" style="color: yellow; filter:drop-shadow(0px 0px 10px yellow)"></span>
                                {% endif %}
                            </td>
                            <td>{{ task.datestamp }}</td>
                            <td>
                                <a href="/oracle/updateTask/{{ task.id }}"><span class="fa fa-pencil-alt"></span></a>
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>

            </div>

        </div>
    </div>
    <!-- End Body -->
{% endblock %}